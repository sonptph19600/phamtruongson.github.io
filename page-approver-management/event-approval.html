<div class="">
    <div class="row p-3 ">
        <div class="mb-5 p-3 container"
            style="border: 1px solid white; background-color: white; box-shadow: 1px 1px 6px 1px rgb(216, 213, 213);">
            <div class="fs-5">Bộ lọc</div>
            <hr>
            <div class="mt-3" style=" height: 80%;">
                <form>
                    <div class="row">
                        <div class="col">
                            <div class="row mb-3">
                                <label for="inputNameEvent" class="col-sm-4 col-form-label">Tên sự kiện</label>
                                <div class="col-sm">
                                    <input type="text" class="form-control" id="inputNameEvent"
                                        placeholder="Nhập tên sự kiện..." ng-model="eventName">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label for="inputPassword3" class="col-sm-4 col-form-label">Danh mục sự kiện</label>
                                <div class="col-sm">
                                    <select chosen multiple aria-label="Default select example" class="form-select"
                                        id="inputEventCategory" data-placeholder="Chọn danh mục sự kiện..."
                                        ng-model="eventCategory" ng-change="getEventCategory()">
                                        <option ng-repeat="option in eventCategory" value="{{option.id}}">
                                            {{option.name}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <fieldset class="row mb-3">
                                <legend class="col-form-label col-sm-4 pt-0">Hình thức tổ chức</legend>
                                <div class="col-sm d-flex">
                                    <div class="form-check mx-1">
                                        <input class="form-check-input" type="radio" name="formality" id="formality1"
                                            ng-model="formality" ng-value="0">
                                        <label class="form-check-label" for="formality1">
                                            Offline
                                        </label>
                                    </div>
                                    <div class="form-check mx-1">
                                        <input class="form-check-input" type="radio" name="formality" id="formality2"
                                            ng-model="formality" ng-value="1">
                                        <label class="form-check-label" for="formality2">
                                            Online
                                        </label>
                                    </div>
                                    <div class="form-check mx-1">
                                        <input class="form-check-input" type="radio" name="formality" id="formality3"
                                            ng-model="formality" ng-value="null" checked>
                                        <label class="form-check-label" for="formality3">
                                            Tất cả
                                        </label>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                        <div class="col">
                            <div class="row mb-3">
                                <label for="inputEmail3" class="col-sm-4 col-form-label">Nhóm sự kiện</label>
                                <div class="col-sm">
                                    <select chosen multiple aria-label="Default select example" class="form-select"
                                        id="inputEventGroup" data-placeholder="Chọn nhóm sự kiện..."
                                        ng-model="eventGroup" ng-change="getEventGroup()">
                                        <option ng-repeat="option in eventGroup" value="{{option.id}}">{{option.name}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <fieldset class="row mb-3">
                                <legend class="col-form-label col-sm-4 pt-0">Trạng thái phê duyệt</legend>
                                <div class="col-sm d-flex">
                                    <div class="form-check mx-1">
                                        <input class="form-check-input" type="radio" name="approve" id="approve1"
                                            ng-model="approve" ng-value="0">
                                        <label class="form-check-label" for="approve1">
                                            Đã phê duyệt
                                        </label>
                                    </div>
                                    <div class="form-check mx-1">
                                        <input class="form-check-input" type="radio" name="approve" id="approve2"
                                            ng-model="approve" ng-value="1">
                                        <label class="form-check-label" for="approve2">
                                            Chưa phê duyệt
                                        </label>
                                    </div>
                                    <div class="form-check mx-1">
                                        <input class="form-check-input" type="radio" name="approve" id="approve3"
                                            ng-model="approve" ng-value="null" checked>
                                        <label class="form-check-label" for="approve3">
                                            Tất cả
                                        </label>
                                    </div>
                                </div>
                            </fieldset>
                            <div class="row mb-3">
                                <label for="inputDateEvent" class="col-sm-4 col-form-label">Ngày bắt đầu</label>
                                <div class="col-sm-5">
                                    <input type="datetime-local" class="form-control" ng-model="startDate">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label for="inputDateEvent" class="col-sm-4 col-form-label">Ngày kết thúc</label>
                                <div class="col-sm-5">
                                    <input type="datetime-local" class="form-control" ng-model="endDate">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="text-center"><button type="submit" class="btn btn-primary" ng-click="search()"><i class="fa-solid fa-magnifying-glass"></i> Tìm kiếm</button>
                        <button type="reset" class="btn btn-danger" ng-click="resetForm()"><i class="fa-solid fa-rotate-left"></i> Làm mới bộ lọc</button>
                    </div>
                </form>
            </div>

        </div>

    </div>
    <div class="row">
        <div class="mb-5 p-2"
            style="border: 1px solid white; background-color: white; box-shadow: 1px 1px 6px 1px rgb(216, 213, 213);">
            <div class="fs-4">Danh sách sư kiện</div>
            <hr>
            <div class="mt-3" style=" height: 80%;">
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">STT</th>
                            <th scope="col">Tên sự kiện</th>
                            <th scope="col">Ngày bắt đầu</th>
                            <th scope="col">Ngày kết thúc</th>
                            <th scope="col">Hình thức</th>
                            <th scope="col">Danh mục sự kiện</th>
                            <th scope="col">Thao tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="e in listEvent">
                            <th scope="row">{{e.index}}</th>
                            <td>{{e.name}}</td>
                            <td>{{e.startTime | date:'dd/MM/yyyy'}}</td>
                            <td>{{e.endTime | date:'dd/MM/yyyy'}}</td>
                            <td>{{e.formality?"Online":"Offline"}}</td>
                            <td>{{e.nameCategory}}</td>
                            <td><button type="button" class="btn btn-success" data-bs-toggle="modal"
                                    data-bs-target="#staticBackdrop" ng-click="detail(e.id,e.status)">
                                    <i class="fa-solid fa-pen"></i>
                                </button>
                               </td>


                                
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </div>
</div>

<!-- Button trigger modal -->


<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="staticBackdropLabel">Thông tin sự kiện</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body my-2">
                <div class="container">
                    <div class="row mt-2">
                        <div class="">Tên sự kiện:</div>
                        <div class=""><input type="text" class="form-control" value="{{eventDetail.name}}" disabled />
                        </div>
                    </div>
                    <div class="row my-2">
                        <div class="">Mô tả:</div>
                        <div class=""><textarea class="form-control" rows="5" cols="50"
                                disabled>{{eventDetail.description}}</textarea></div>
                    </div>
                    <div class="row mt-2">
                        <div class="">Danh mục sự kiện:</div>
                        <div class=""><input type="text" class="form-control" value="{{eventDetail.categoryName}}"
                                disabled /></div>
                    </div>
                    <div class="row mt-2">
                        <div class="">Nhóm sự kiện:</div>
                        <div class=""><input type="text" class="form-control" value="{{eventDetail.eventGroup}}"
                                disabled /></div>
                    </div>
                    <div class="row mt-2">
                        <div class="">Người phê duyệt:</div>
                        <div class=""><input type="text" class="form-control"
                                value="{{eventDetail.approverName ||'Chưa có'}}" disabled /></div>
                    </div>
                    <div class="row mt-2">
                        <div class="">Trạng thái:</div>
                        <div class="{{statusTextColor}} fw-bold">{{status}}</div>
                    </div>
                    <div class="row my-2" ng-if="status == 'TỪ CHỐI'">
                        <div class="">Lý do từ chối:</div>
                        <div class=""><textarea class="form-control" rows="5" cols="50"
                                disabled>{{eventDetail.reason}}</textarea></div>
                    </div>
                    <div class="row mt-2">
                        <div class="">Hình thức tổ chức:</div>
                        <div class="d-flex">
                            <div class=""><input type="checkbox" name="" id="" ng-checked="eventDetail.formality == 0"
                                    disabled><label for="" class="mx-1 ">Online</label></div>
                            <div class="mx-2"><input type="checkbox" name="" id=""
                                    ng-checked="eventDetail.formality == 1" disabled><label for=""
                                    class="mx-1 ">Offline</label></div>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-2 mt-1">Địa điểm tổ chức:</div>
                        <div class="col ">
                            <h5 class="fw-bold">{{eventDetail.location}}</h5>
                        </div>
                    </div>
                    <div class="row mt-3 d-flex">
                        <div class="col-2">
                            <div class="">Ngày bắt đầu</div>
                            <div class="">{{eventDetail.startTime| date:'dd/MM/yyyy'}}</div>
                        </div>
                        <div class="col">
                            <div class="">Ngày Kết thúc</div>
                            <div class="">{{eventDetail.endTime| date:'dd/MM/yyyy'}}</div>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="mt-2 h5">Danh sách người tổ chức:</div>
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th scope="col">STT</th>
                                    <th scope="col">Họ tên</th>
                                    <th scope="col">Số điện thoại</th>
                                    <th scope="col">Địa chỉ Email</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="o in listOrganizerEvent">
                                    <th scope="col">{{o.index}}</th>
                                    <td scope="col">{{o.name}}</td>
                                    <td scope="col">{{o.phoneNumber}}</td>
                                    <td scope="col">{{o.email}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="fa-solid fa-rotate-left"></i> Trở về</button>
                <button type="button" class="btn btn-danger" ng-if="status == 'MỚI THÀNH LẬP'"
                    data-bs-target="#staticBackdropUn" data-bs-toggle="modal"><i class="fa-solid fa-xmark"></i> Từ chối</button>
                <button type="button" class="btn btn-primary"
                    ng-if="status == 'MỚI THÀNH LẬP' || status == 'TỪ CHỐI' " ng-click="approved(2,eventDetail.id)"
                    data-bs-target="#exampleModal" data-bs-toggle="modal"><i class="fa-solid fa-check"></i>
                    {{status == "MỚI THÀNH LẬP"?"Phê duyệt":"Phê duyệt lại"}}</button>
            </div>
        </div>
    </div>
</div>
<!-- Modal từ chối -->
<div class="modal fade" id="staticBackdropUn" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="staticBackdropLabel">Xác nhận từ chối</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class=""> <span class="text-danger">(*)</span> do từ chối: </div>
                    <div class=""><textarea name="" id="" rows="5" cols="50" ng-model = "reason" class="form-control"></textarea></div>
                    <div class=""><span class="text-danger">{{errorMess}}</span></div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-target="#staticBackdrop" data-bs-toggle="modal"><i class="fa-solid fa-rotate-left"></i> Trở lại</button>
                <button type="button" class="btn btn-primary"  ng-click ="approved(1,eventDetail.id)"><i class="fa-solid fa-check"></i> Xác nhận</button>
            </div>
        </div>
    </div>
</div>
<!-- Modal xác nhận -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Thông báo</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" ng-click = "reloadPage()"></button>
        </div>
        <div class="modal-body">
          {{message||errors}}
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal" ng-click = "reloadPage()"><i class="fa-solid fa-check"></i> Xác nhận</button>
        </div>
      </div>
    </div>
  </div>


  